import e,{createContext as t,memo as r,useEffect as n,useLayoutEffect as i,useState as o,useCallback as s,useMemo as a,isValidElement as c,cloneElement as u,useContext as d}from"react";import{Button as l,makeStyles as g,createStyles as h,IconButton as f,MenuItem as p,ListItemText as v,Menu as m,Typography as y,Link as D,useTheme as O,createTheme as b,ThemeProvider as E}from"@material-ui/core";import{Skeleton as I,TreeItem as T,TreeView as S}from"@material-ui/lab";import{MoreVert as w,DragIndicator as C,KeyboardArrowDown as N,KeyboardArrowRight as P}from"@material-ui/icons";import{jsx as x}from"react/jsx-runtime";var R=function(t){var r=t.buttons,n=t.leftAlign,i=t.leftContent,o=t.endContent,s=t.disabled,a=t.disableButtonStyling,c=r.length;return e.createElement("div",{style:{display:"flex",flexDirection:"row"}},i,!n&&e.createElement("div",{style:{flexGrow:1}}),!n&&o,t.buttons.map((function(t,r){var i=r+1===c,o="outlined";return a||(n?0===r&&(o="contained"):i&&(o="contained")),e.createElement(l,{onClick:t.onClick,key:r,variant:o,color:"primary",style:{marginRight:i?"0rem":"0.5rem",textTransform:"none"},disabled:s||t.disabled,disableElevation:!0,size:"small"},t.label)})))},k=function(){return k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},k.apply(this,arguments)},_=g((function(e){return h({treeItem:{padding:e.spacing(1),display:"flex",alignItems:"center"},itemGroup:{marginLeft:7,paddingLeft:18,borderLeft:"1px solid #CCC"},clickable:{color:e.palette.primary.main,"&:hover":{textDecoration:"underline"}},secondaryText:{color:"rgba(0, 0, 0, 0.54)"}})}));const M=t({dragDropManager:void 0});function j(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var L="function"==typeof Symbol&&Symbol.observable||"@@observable",A=function(){return Math.random().toString(36).substring(7).split("").join(".")},H={INIT:"@@redux/INIT"+A(),REPLACE:"@@redux/REPLACE"+A(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+A()}};function U(e){if(void 0===e)return"undefined";if(null===e)return"null";var t=typeof e;switch(t){case"boolean":case"string":case"number":case"symbol":case"function":return t}if(Array.isArray(e))return"array";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";var r=function(e){return"function"==typeof e.constructor?e.constructor.name:null}(e);switch(r){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return r}return t.slice(8,-1).toLowerCase().replace(/\s/g,"")}function B(e){var t=typeof e;return"production"!==process.env.NODE_ENV&&(t=U(e)),t}function F(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("production"===process.env.NODE_ENV?j(0):"It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("production"===process.env.NODE_ENV?j(1):"Expected the enhancer to be a function. Instead, received: '"+B(r)+"'");return r(F)(e,t)}if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?j(2):"Expected the root reducer to be a function. Instead, received: '"+B(e)+"'");var i=e,o=t,s=[],a=s,c=!1;function u(){a===s&&(a=s.slice())}function d(){if(c)throw new Error("production"===process.env.NODE_ENV?j(3):"You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function l(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?j(4):"Expected the listener to be a function. Instead, received: '"+B(e)+"'");if(c)throw new Error("production"===process.env.NODE_ENV?j(5):"You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");var t=!0;return u(),a.push(e),function(){if(t){if(c)throw new Error("production"===process.env.NODE_ENV?j(6):"You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");t=!1,u();var r=a.indexOf(e);a.splice(r,1),s=null}}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error("production"===process.env.NODE_ENV?j(7):"Actions must be plain objects. Instead, the actual type was: '"+B(e)+"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.");if(void 0===e.type)throw new Error("production"===process.env.NODE_ENV?j(8):'Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if(c)throw new Error("production"===process.env.NODE_ENV?j(9):"Reducers may not dispatch actions.");try{c=!0,o=i(o,e)}finally{c=!1}for(var t=s=a,r=0;r<t.length;r++){(0,t[r])()}return e}return g({type:H.INIT}),(n={dispatch:g,subscribe:l,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error("production"===process.env.NODE_ENV?j(10):"Expected the nextReducer to be a function. Instead, received: '"+B(e));i=e,g({type:H.REPLACE})}})[L]=function(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error("production"===process.env.NODE_ENV?j(11):"Expected the observer to be an object. Instead, received: '"+B(e)+"'");function r(){e.next&&e.next(d())}return r(),{unsubscribe:t(r)}}})[L]=function(){return this},e},n}function V(e,t,...r){if("undefined"!=typeof process&&"production"===process.env.NODE_ENV&&void 0===t)throw new Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;e=new Error(t.replace(/%s/g,(function(){return r[n++]}))),e.name="Invariant Violation"}throw e.framesToPop=1,e}}function Y(e){return"object"==typeof e}const G="dnd-core/INIT_COORDS",X="dnd-core/BEGIN_DRAG",q="dnd-core/PUBLISH_DRAG_SOURCE",W="dnd-core/HOVER",$="dnd-core/DROP",K="dnd-core/END_DRAG";function z(e,t){return{type:G,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}const J={type:G,payload:{clientOffset:null,sourceClientOffset:null}};function Q(e){return function(t=[],r={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:o}=r,s=e.getMonitor(),a=e.getRegistry();e.dispatch(z(i)),function(e,t,r){V(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach((function(e){V(r.getSource(e),"Expected sourceIds to be registered.")}))}(t,s,a);const c=function(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}(t,s);if(null==c)return void e.dispatch(J);let u=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");!function(e){V("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(o),u=o(c)}e.dispatch(z(i,u));const d=a.getSource(c).beginDrag(s,c);if(null==d)return;!function(e){V(Y(e),"Item must be an object.")}(d),a.pinSource(c);const l=a.getSourceType(c);return{type:X,payload:{itemType:l,item:d,sourceId:c,clientOffset:i||null,sourceClientOffset:u||null,isSourcePublic:!!n}}}}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Z(e,t,r[t])}))}return e}function te(e){return function(t={}){const r=e.getMonitor(),n=e.getRegistry();!function(e){V(e.isDragging(),"Cannot call drop while not dragging."),V(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(r);const i=function(e){const t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(r);i.forEach(((i,o)=>{const s=function(e,t,r,n){const i=r.getTarget(e);let o=i?i.drop(n,e):void 0;(function(e){V(void 0===e||Y(e),"Drop result must either be an object or undefined.")})(o),void 0===o&&(o=0===t?{}:n.getDropResult());return o}(i,o,n,r),a={type:$,payload:{dropResult:ee({},t,s)}};e.dispatch(a)}))}}function re(e){return function(){const t=e.getMonitor(),r=e.getRegistry();!function(e){V(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);const n=t.getSourceId();if(null!=n){r.getSource(n,!0).endDrag(t,n),r.unpinSource()}return{type:K}}}function ne(e,t){return null===t?null===e:Array.isArray(e)?e.some((e=>e===t)):e===t}function ie(e){return function(t,{clientOffset:r}={}){!function(e){V(Array.isArray(e),"Expected targetIds to be an array.")}(t);const n=t.slice(0),i=e.getMonitor(),o=e.getRegistry();return function(e,t,r){for(let n=e.length-1;n>=0;n--){const i=e[n];ne(t.getTargetType(i),r)||e.splice(n,1)}}(n,o,i.getItemType()),function(e,t,r){V(t.isDragging(),"Cannot call hover while not dragging."),V(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){const n=e[t];V(e.lastIndexOf(n)===t,"Expected targetIds to be unique in the passed array.");V(r.getTarget(n),"Expected targetIds to be registered.")}}(n,i,o),function(e,t,r){e.forEach((function(e){r.getTarget(e).hover(t,e)}))}(n,i,o),{type:W,payload:{targetIds:n,clientOffset:r||null}}}}function oe(e){return function(){if(e.getMonitor().isDragging())return{type:q}}}class se{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;const r=function(e){return{beginDrag:Q(e),publishDragSource:oe(e),hover:ie(e),drop:te(e),endDrag:re(e)}}(this);return Object.keys(r).reduce(((n,i)=>{const o=r[i];var s;return n[i]=(s=o,(...r)=>{const n=s.apply(e,r);void 0!==n&&t(n)}),n}),{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function ae(e,t){return{x:e.x-t.x,y:e.y-t.y}}const ce=[],ue=[];ce.__IS_NONE__=!0,ue.__IS_ALL__=!0;class de{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;V("function"==typeof e,"listener must be a function."),V(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;return this.store.subscribe((()=>{const t=this.store.getState(),i=t.stateId;try{const o=i===n||i===n+1&&!function(e,t){return e!==ce&&(e===ue||void 0===t||(r=e,t.filter((e=>r.indexOf(e)>-1))).length>0);var r}(t.dirtyHandlerIds,r);o||e()}finally{n=i}}))}subscribeToOffsetChange(e){V("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe((()=>{const r=this.store.getState().dragOffset;r!==t&&(t=r,e())}))}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return V(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(V(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;return ne(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(V(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;return this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ne(n,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const s=o.indexOf(e);return r?s===o.length-1:s>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){const{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return t&&r&&n?ae((o=n,{x:(i=t).x+o.x,y:i.y+o.y}),r):null;var i,o}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return function(e){const{clientOffset:t,initialClientOffset:r}=e;return t&&r?ae(t,r):null}(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const le="undefined"!=typeof global?global:self,ge=le.MutationObserver||le.WebKitMutationObserver;function he(e){return function(){const t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}const fe="function"==typeof ge?function(e){let t=1;const r=new ge(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}:he;class pe{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const ve=new class{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,r=e.length-this.index;t<r;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=fe(this.flush),this.requestErrorThrow=he((()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()}))}},me=new class{create(e){const t=this.freeTasks,r=t.length?t.pop():new pe(this.onError,(e=>t[t.length]=e));return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}(ve.registerPendingError);const ye="dnd-core/ADD_SOURCE",De="dnd-core/ADD_TARGET",Oe="dnd-core/REMOVE_SOURCE",be="dnd-core/REMOVE_TARGET";function Ee(e,t){t&&Array.isArray(e)?e.forEach((e=>Ee(e,!1))):V("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Ie;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(Ie||(Ie={}));let Te=0;function Se(e){const t=(Te++).toString();switch(e){case Ie.SOURCE:return`S${t}`;case Ie.TARGET:return`T${t}`;default:throw new Error(`Unknown Handler Role: ${e}`)}}function we(e){switch(e[0]){case"S":return Ie.SOURCE;case"T":return Ie.TARGET;default:throw new Error(`Cannot parse handler ID: ${e}`)}}function Ce(e,t){const r=e.entries();let n=!1;do{const{done:e,value:[,i]}=r.next();if(i===t)return!0;n=!!e}while(!n);return!1}class Ne{addSource(e,t){Ee(e),function(e){V("function"==typeof e.canDrag,"Expected canDrag to be a function."),V("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),V("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);const r=this.addHandler(Ie.SOURCE,e,t);return this.store.dispatch(function(e){return{type:ye,payload:{sourceId:e}}}(r)),r}addTarget(e,t){Ee(e,!0),function(e){V("function"==typeof e.canDrop,"Expected canDrop to be a function."),V("function"==typeof e.hover,"Expected hover to be a function."),V("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);const r=this.addHandler(Ie.TARGET,e,t);return this.store.dispatch(function(e){return{type:De,payload:{targetId:e}}}(r)),r}containsHandler(e){return Ce(this.dragSources,e)||Ce(this.dropTargets,e)}getSource(e,t=!1){V(this.isSourceId(e),"Expected a valid source ID.");return t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return V(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return V(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return V(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return we(e)===Ie.SOURCE}isTargetId(e){return we(e)===Ie.TARGET}removeSource(e){var t;V(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:Oe,payload:{sourceId:e}}}(e)),t=()=>{this.dragSources.delete(e),this.types.delete(e)},ve.enqueueTask(me.create(t))}removeTarget(e){V(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:be,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);V(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){V(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const n=Se(e);return this.types.set(n,t),e===Ie.SOURCE?this.dragSources.set(n,r):e===Ie.TARGET&&this.dropTargets.set(n,r),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Pe=(e,t)=>e===t;function xe(e=ce,t){switch(t.type){case W:break;case ye:case De:case be:case Oe:return ce;default:return ue}const{targetIds:r=[],prevTargetIds:n=[]}=t.payload,i=function(e,t){const r=new Map,n=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(n),t.forEach(n);const i=[];return r.forEach(((e,t)=>{1===e&&i.push(t)})),i}(r,n);if(!(i.length>0||!function(e,t,r=Pe){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}(r,n)))return ce;const o=n[n.length-1],s=r[r.length-1];return o!==s&&(o&&i.push(o),s&&i.push(s)),i}function Re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ke={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function _e(e=ke,t){const{payload:r}=t;switch(t.type){case G:case X:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case W:return n=e.clientOffset,i=r.clientOffset,!n&&!i||n&&i&&n.x===i.x&&n.y===i.y?e:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Re(e,t,r[t])}))}return e}({},e,{clientOffset:r.clientOffset});case K:case $:return ke;default:return e}var n,i}function Me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Me(e,t,r[t])}))}return e}const Le={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Ae(e=Le,t){const{payload:r}=t;switch(t.type){case X:return je({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case q:return je({},e,{isSourcePublic:!0});case W:return je({},e,{targetIds:r.targetIds});case be:return-1===e.targetIds.indexOf(r.targetId)?e:je({},e,{targetIds:(n=e.targetIds,i=r.targetId,n.filter((e=>e!==i)))});case $:return je({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case K:return je({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}var n,i}function He(e=0,t){switch(t.type){case ye:case De:return e+1;case Oe:case be:return e-1;default:return e}}function Ue(e=0){return e+1}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Be(e,t,r[t])}))}return e}function Ve(e={},t){return{dirtyHandlerIds:xe(e.dirtyHandlerIds,{type:t.type,payload:Fe({},t.payload,{prevTargetIds:(r=e,n="dragOperation.targetIds",i=[],n.split(".").reduce(((e,t)=>e&&e[t]?e[t]:i||null),r))})}),dragOffset:_e(e.dragOffset,t),refCount:He(e.refCount,t),dragOperation:Ae(e.dragOperation,t),stateId:Ue(e.stateId)};var r,n,i}function Ye(e,t=void 0,r={},n=!1){const i=function(e){const t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return F(Ve,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n),o=new de(i,new Ne(i)),s=new se(i,o),a=e(s,t,r);return s.receiveBackend(a),s}function Ge(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}let Xe=0;const qe=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var We=r((function(e){var{children:t}=e,r=Ge(e,["children"]);const[i,o]=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}const t=function(e,t=$e(),r,n){const i=t;i[qe]||(i[qe]={dragDropManager:Ye(e,t,r,n)});return i[qe]}(e.backend,e.context,e.options,e.debugMode),r=!e.context;return[t,r]}(r);return n((()=>{if(o){const e=$e();return++Xe,()=>{0==--Xe&&(e[qe]=null)}}}),[]),x(M.Provider,{value:i,children:t})}));function $e(){return"undefined"!=typeof global?global:window}function Ke(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ze=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!=i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r},Je=Ke(ze);const Qe="undefined"!=typeof window?i:n;function Ze(e,t,r){const[n,i]=function(e,t,r){const[n,i]=o((()=>t(e))),a=s((()=>{const o=t(e);Je(n,o)||(i(o),r&&r())}),[n,e,r]);return Qe(a),[n,a]}(e,t,r);return Qe((function(){const t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(i,{handlerIds:[t]})}),[e,i]),n}function et(e,t,r){return Ze(t,e||(()=>({})),(()=>r.reconnect()))}function tt(e,t){const r=[...t||[]];return null==t&&"function"!=typeof e&&r.push(e),a((()=>"function"==typeof e?e():e),r)}function rt(e){return a((()=>e.hooks.dragSource()),[e])}function nt(e){return a((()=>e.hooks.dragPreview()),[e])}let it=!1,ot=!1;class st{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){V(!it,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return it=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{it=!1}}isDragging(){if(!this.sourceId)return!1;V(!ot,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ot=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ot=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let at=!1;class ct{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;V(!at,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return at=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{at=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function ut(e,t,r,n){let i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;const o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;const a=Object.prototype.hasOwnProperty.bind(t);for(let s=0;s<o.length;s++){const c=o[s];if(!a(c))return!1;const u=e[c],d=t[c];if(i=r?r.call(n,u,d,c):void 0,!1===i||void 0===i&&u!==d)return!1}return!0}function dt(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function lt(e){return(t=null,r=null)=>{if(!c(t)){const n=t;return e(n,r),n}const n=t;!function(e){if("string"==typeof e.type)return;const t=e.type.displayName||e.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(n);return function(e,t){const r=e.ref;return V("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),u(e,r?{ref:e=>{ht(r,e),ht(t,e)}}:{ref:t})}(n,r?t=>e(t,r):e)}}function gt(e){const t={};return Object.keys(e).forEach((r=>{const n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{const e=lt(n);t[r]=()=>e}})),t}function ht(e,t){"function"==typeof e?e(t):e.current=t}class ft{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();r&&this.disconnectDragPreview(),this.handlerId&&(t?r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions)):this.lastConnectedDragPreview=t)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ut(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ut(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=gt({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,dt(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,dt(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class pt{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ut(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=gt({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,dt(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function vt(){const{dragDropManager:e}=d(M);return V(null!=e,"Expected drag drop context"),e}class mt{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{},null!=r?r:null}canDrag(){const e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){const r=this.spec,n=this.monitor,{isDragging:i}=r;return i?i(n):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:n}=e;n&&n(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function yt(e,t,r){const i=vt(),o=function(e,t,r){const i=a((()=>new mt(e,t,r)),[t,r]);return n((()=>{i.spec=e}),[e]),i}(e,t,r),s=function(e){return a((()=>{const t=e.type;return V(null!=t,"spec.type must be defined"),t}),[e])}(e);Qe((function(){if(null!=s){const[e,n]=function(e,t,r){const n=r.getRegistry(),i=n.addSource(e,t);return[i,()=>n.removeSource(i)]}(s,o,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),n}}),[i,t,r,o,s])}function Dt(e,t){const r=tt(e,t);V(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=function(){const e=vt();return a((()=>new st(e)),[e])}(),i=function(e,t){const r=vt(),n=a((()=>new ft(r.getBackend())),[r]);return Qe((()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource())),[n,e]),Qe((()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview())),[n,t]),n}(r.options,r.previewOptions);return yt(r,n,i),[et(r.collect,n,i),rt(i),nt(i)]}function Ot(e){return a((()=>e.hooks.dropTarget()),[e])}class bt{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Et(e,t,r){const i=vt(),o=function(e,t){const r=a((()=>new bt(e,t)),[t]);return n((()=>{r.spec=e}),[e]),r}(e,t),s=function(e){const{accept:t}=e;return a((()=>(V(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);Qe((function(){const[e,n]=function(e,t,r){const n=r.getRegistry(),i=n.addTarget(e,t);return[i,()=>n.removeTarget(i)]}(s,o,i);return t.receiveHandlerId(e),r.receiveHandlerId(e),n}),[i,t,o,r,s.map((e=>e.toString())).join("|")])}function It(e,t){const r=tt(e,t),n=function(){const e=vt();return a((()=>new ct(e)),[e])}(),i=function(e){const t=vt(),r=a((()=>new pt(t.getBackend())),[t]);return Qe((()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget())),[e]),r}(r.options);return Et(r,n,i),[et(r.collect,n,i),Ot(i)]}var Tt=function(t){var r=t.icon,n=t.onClick;t.variant,t.disabled;return e.createElement(f,{onClick:function(e){e.preventDefault(),n(e)}},r)},St=function(t){var r=t.label,n=t.onClick,i={primary:r,primaryTypographyProps:{color:"textPrimary"}};return e.createElement(p,{onClick:function(e){e.preventDefault(),n()},dense:!0},e.createElement(v,k({},i)))},wt=function(t){var r=o(null),n=r[0],i=r[1],s=t.items;t.label;var a=t.icon;t.variant;var c=function(){i(null)},u={open:Boolean(n),anchorEl:n,onClose:c,MenuListProps:{onMouseLeave:c}},d=s.map((function(e){return k(k({},e),{onClick:function(){c(),e.onClick()}})}));return e.createElement(e.Fragment,null,e.createElement(Tt,{icon:a,onClick:function(e){i(e.currentTarget)}}),e.createElement(m,k({},u),d.map((function(t,r){return e.createElement(St,k({key:r},t))}))))},Ct=function(t){var r=t.actions.map((function(e){return{label:e.label,onClick:e.onClick}}));return e.createElement(wt,{items:r,icon:e.createElement(w,null)})},Nt=e.createContext({pending:!1}),Pt=function(t){var r=_(),n=t.primaryText,i=t.primaryAction,o=null==i?void 0:i.clickAction,s=null==i?void 0:i.navigateToURL,a={variant:"body1",children:Boolean(s)?e.createElement(D,{href:s},e.createElement("span",{className:r.clickable},n)):e.createElement("span",{onClick:o,className:Boolean(o)?r.clickable:void 0},n)};return e.createElement(y,k({},a))},xt=function(t){var r=O(),n=_(),i=t.adapter,o=i.itemID,s=i.itemType,a=i.dragData,c=i.canDrop,u=i.onDrop,d=i.disableDrag,l=Dt((function(){return{type:s,item:a,collect:function(e){return{isDragging:e.isDragging()}},canDrag:!d}})),g=l[0],h=l[1],f=l[2],p=It((function(){return{accept:"group"===s?["group","item"]:["item"],collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}},canDrop:function(e){return e.itemID!==a.itemID&&c(e)},drop:function(e){return u(e),e}}})),v=p[0],m=p[1],y=g.isDragging,D=!d,b=v.isOver,E=v.canDrop,I={borderBottom:b&&E?"2rem solid ".concat(r.palette.primary.light):""};return e.createElement("div",{ref:f,style:{opacity:y?.5:1}},e.createElement("div",{className:n.treeItem,ref:m,style:I},t.children,D&&e.createElement("div",{id:o,ref:h,style:{cursor:"grab"}},e.createElement(C,null))))},Rt=function(t){var r=_(),n=function(){var t=e.useContext(Nt);if(!t)throw Error("Tree Context not provided");return t}().pending,i=t.adapter,o=i.primaryText,s=i.secondaryText,a=i.actions,c=i.primaryAction,u=Boolean(t.dragDropAdapter),d=a&&a.length>0,l={flex:1},g=n?e.createElement("div",{style:l},e.createElement(I,{variant:"rect",animation:"wave"}),e.createElement(I,{variant:"rect",animation:"wave"})):e.createElement("div",{style:l},e.createElement(Pt,{primaryText:o,primaryAction:c}),Boolean(s)&&e.createElement(y,{variant:"body2",className:r.secondaryText},s));return u?e.createElement(xt,{adapter:t.dragDropAdapter},g,d&&e.createElement(Ct,{actions:a})):e.createElement("div",null,e.createElement("div",{className:r.treeItem},g,d&&e.createElement(Ct,{actions:a})))},kt=function(t){var r=t.adapter,n=r.id,i=r.childItems,o={nodeId:n,label:e.createElement(Rt,k({},t)),children:null==i?void 0:i.map((function(t){return e.createElement(kt,k({},t))}))};return e.createElement(T,k({},o))};function _t(e){let t=null;return()=>(null==t&&(t=e()),t)}class Mt{enter(e){const t=this.entered.length;return this.entered=function(e,t){const r=new Set,n=e=>r.add(e);e.forEach(n),t.forEach(n);const i=[];return r.forEach((e=>i.push(e))),i}(this.entered.filter((t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e)))),[e]),0===t&&this.entered.length>0}leave(e){const t=this.entered.length;var r,n;return this.entered=(r=this.entered.filter(this.isNodeInDocument),n=e,r.filter((e=>e!==n))),t>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class jt{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach((e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})}))}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach((r=>{const n=this.config.exposeProperties[r];null!=n&&(t[r]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})})),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Lt="__NATIVE_FILE__",At="__NATIVE_URL__",Ht="__NATIVE_TEXT__",Ut="__NATIVE_HTML__";var Bt=Object.freeze({__proto__:null,FILE:Lt,HTML:Ut,TEXT:Ht,URL:At});function Ft(e,t,r){const n=t.reduce(((t,r)=>t||e.getData(r)),"");return null!=n?n:r}const Vt={[Lt]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[Ut]:{exposeProperties:{html:(e,t)=>Ft(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[At]:{exposeProperties:{urls:(e,t)=>Ft(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[Ht]:{exposeProperties:{text:(e,t)=>Ft(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function Yt(e){if(!e)return null;const t=Array.prototype.slice.call(e.types||[]);return Object.keys(Vt).filter((e=>{const r=Vt[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some((e=>t.indexOf(e)>-1))}))[0]||null}const Gt=_t((()=>/firefox/i.test(navigator.userAgent))),Xt=_t((()=>Boolean(window.safari)));class qt{interpolate(e){const{xs:t,ys:r,c1s:n,c2s:i,c3s:o}=this;let s=t.length-1;if(e===t[s])return r[s];let a,c=0,u=o.length-1;for(;c<=u;){a=Math.floor(.5*(c+u));const n=t[a];if(n<e)c=a+1;else{if(!(n>e))return r[a];u=a-1}}s=Math.max(0,u);const d=e-t[s],l=d*d;return r[s]+n[s]*d+i[s]*l+o[s]*d*l}constructor(e,t){const{length:r}=e,n=[];for(let e=0;e<r;e++)n.push(e);n.sort(((t,r)=>e[t]<e[r]?-1:1));const i=[],o=[];let s,a;for(let n=0;n<r-1;n++)s=e[n+1]-e[n],a=t[n+1]-t[n],i.push(s),o.push(a/s);const c=[o[0]];for(let e=0;e<i.length-1;e++){const t=o[e],r=o[e+1];if(t*r<=0)c.push(0);else{s=i[e];const n=i[e+1],o=s+n;c.push(3*o/((o+n)/t+(o+s)/r))}}c.push(o[o.length-1]);const u=[],d=[];let l;for(let e=0;e<c.length-1;e++){l=o[e];const t=c[e],r=1/i[e],n=t+c[e+1]-l-l;u.push((l-t-n)*r),d.push(n*r*r)}this.xs=e,this.ys=t,this.c1s=c,this.c2s=u,this.c3s=d}}const Wt=1;function $t(e){const t=e.nodeType===Wt?e:e.parentElement;if(!t)return null;const{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Kt(e){return{x:e.clientX,y:e.clientY}}function zt(e,t,r,n,i){const o="IMG"===(s=t).nodeName&&(Gt()||!(null===(a=document.documentElement)||void 0===a?void 0:a.contains(s)));var s,a;const c=$t(o?e:t),u={x:r.x-c.x,y:r.y-c.y},{offsetWidth:d,offsetHeight:l}=e,{anchorX:g,anchorY:h}=n,{dragPreviewWidth:f,dragPreviewHeight:p}=function(e,t,r,n){let i=e?t.width:r,o=e?t.height:n;return Xt()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(o,t,d,l),{offsetX:v,offsetY:m}=i,y=0===m||m;return{x:0===v||v?v:new qt([0,.5,1],[u.x,u.x/d*f,u.x+f-d]).interpolate(g),y:y?m:(()=>{let e=new qt([0,.5,1],[u.y,u.y/l*p,u.y+p-l]).interpolate(h);return Xt()&&o&&(e+=(window.devicePixelRatio-1)*p),e})()}}class Jt{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null===(e=this.globalContext)||void 0===e?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Qt(e,t,r[t])}))}return e}class er{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;var t;void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(t=this.window)||void 0===t||t.cancelAnimationFrame(this.asyncEndDragFrameId)))}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const n=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",n),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",n),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=t=>this.handleDragEnter(t,e),n=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",n),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",n),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Zt({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId();return Zt({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Bt).some((t=>Bt[t]===e))}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){const r=Vt[e];if(!r)throw new Error(`native type ${e} has no configuration`);const n=new jt(r);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout((()=>{var e;return null===(e=this.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}),1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{const t=this.sourceNodes.get(e);return t&&$t(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>Boolean(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{const e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame((()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null})))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;const{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;const r=Kt(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});const{dataTransfer:n}=e,i=Yt(n);if(this.monitor.isDragging()){if(n&&"function"==typeof n.setDragImage){const e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){const{anchorX:e,anchorY:o,offsetX:s,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),c=zt(t,i,r,{anchorX:e,anchorY:o},{offsetX:s,offsetY:a});n.setDragImage(i,c.x,c.y)}}try{null==n||n.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);const{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout((()=>this.actions.publishDragSource()),0)}else if(i)this.beginDragNativeItem(i);else{if(n&&!n.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{var t;(this.dragEnterTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer));if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;const{dataTransfer:r}=e,n=Yt(r);n&&this.beginDragNativeItem(n,r)},this.handleTopDragEnter=e=>{const{dragEnterTargetIds:t}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:Kt(e)});t.some((e=>this.monitor.canDropOnTarget(e)))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=e=>{var t;(this.dragOverTargetIds=[],this.isDraggingNativeItem())&&(null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer))},this.handleTopDragOver=e=>{const{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));this.altKeyPressed=e.altKey,this.lastClientOffset=Kt(e),this.scheduleHover(t);(t||[]).some((e=>this.monitor.canDropOnTarget(e)))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault();this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout((()=>this.endDragNativeItem()),0),this.cancelHover())},this.handleTopDropCapture=e=>{var t;(this.dropTargetIds=[],this.isDraggingNativeItem())?(e.preventDefault(),null===(t=this.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):Yt(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{const{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:Kt(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{const t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new Jt(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Mt(this.isNodeInDocument)}}const tr=function(e,t,r){return new er(e,t,r)};var rr=function(t){var r=o(null),i=r[0],s=r[1];return n((function(){s(document.getElementById(t.rootElementID))}),[t.rootElementID]),console.log(i),i?e.createElement(We,{backend:tr,options:{rootElement:i}},t.children):null},nr=function(t){var r=t.treeID,n=t.items;return e.createElement(rr,{rootElementID:r},n.map((function(t){return e.createElement(kt,k({},t))})))},ir=function(t){var r=t.treeID,n={pending:Boolean(t.pending)};return e.createElement(Nt.Provider,{value:n},e.createElement("div",{id:r},e.createElement(S,{defaultCollapseIcon:e.createElement(N,null),defaultExpandIcon:e.createElement(P,null)},e.createElement(nr,k({},t)))))},or=function(t){var r=b({palette:{primary:t.primaryColor,background:{default:"#F5F5F6"}}});return e.createElement(E,{theme:r},t.children)};export{or as ArtisanUXProvider,R as ButtonBar,ir as Tree};
//# sourceMappingURL=index.js.map
